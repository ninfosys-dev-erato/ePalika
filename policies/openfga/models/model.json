{
  "schema_version": "1.1",
  "type_definitions": [
    { "type": "user" },

    {
      "type": "tenant",
      "relations": {
        "admin": { "this": {} },
        "darta_clerk": { "this": {} },
        "darta_reviewer": { "this": {} },
        "darta_registrar": { "this": {} },
        "chalani_dispatcher": { "this": {} },
        "chalani_approver": { "this": {} },
        "numbering_officer": { "this": {} },
        "identity_admin": { "this": {} }
      },
      "metadata": {
        "relations": {
          "admin":               { "directly_related_user_types": [ { "type": "user" } ] },
          "darta_clerk":         { "directly_related_user_types": [ { "type": "user" } ] },
          "darta_reviewer":      { "directly_related_user_types": [ { "type": "user" } ] },
          "darta_registrar":     { "directly_related_user_types": [ { "type": "user" } ] },
          "chalani_dispatcher":  { "directly_related_user_types": [ { "type": "user" } ] },
          "chalani_approver":    { "directly_related_user_types": [ { "type": "user" } ] },
          "numbering_officer":   { "directly_related_user_types": [ { "type": "user" } ] },
          "identity_admin":      { "directly_related_user_types": [ { "type": "user" } ] }
        }
      }
    },

    {
      "type": "graphql",
      "relations": {
        "in_tenant": { "this": {} },
        "can_query": {
          "union": {
            "child": [
              { "tupleToUserset": { "tupleset": { "relation": "in_tenant" }, "computedUserset": { "relation": "admin" } } },
              { "tupleToUserset": { "tupleset": { "relation": "in_tenant" }, "computedUserset": { "relation": "darta_clerk" } } },
              { "tupleToUserset": { "tupleset": { "relation": "in_tenant" }, "computedUserset": { "relation": "darta_reviewer" } } },
              { "tupleToUserset": { "tupleset": { "relation": "in_tenant" }, "computedUserset": { "relation": "darta_registrar" } } },
              { "tupleToUserset": { "tupleset": { "relation": "in_tenant" }, "computedUserset": { "relation": "chalani_dispatcher" } } },
              { "tupleToUserset": { "tupleset": { "relation": "in_tenant" }, "computedUserset": { "relation": "chalani_approver" } } },
              { "tupleToUserset": { "tupleset": { "relation": "in_tenant" }, "computedUserset": { "relation": "numbering_officer" } } },
              { "tupleToUserset": { "tupleset": { "relation": "in_tenant" }, "computedUserset": { "relation": "identity_admin" } } }
            ]
          }
        }
      },
      "metadata": {
        "relations": {
          "in_tenant": { "directly_related_user_types": [ { "type": "tenant" } ] }
        }
      }
    },

    {
      "type": "service_darta",
      "relations": {
        "in_tenant": { "this": {} },
        "can_use": {
          "union": {
            "child": [
              { "tupleToUserset": { "tupleset": { "relation": "in_tenant" }, "computedUserset": { "relation": "admin" } } },
              { "tupleToUserset": { "tupleset": { "relation": "in_tenant" }, "computedUserset": { "relation": "darta_clerk" } } },
              { "tupleToUserset": { "tupleset": { "relation": "in_tenant" }, "computedUserset": { "relation": "darta_reviewer" } } },
              { "tupleToUserset": { "tupleset": { "relation": "in_tenant" }, "computedUserset": { "relation": "darta_registrar" } } }
            ]
          }
        }
      },
      "metadata": {
        "relations": {
          "in_tenant": { "directly_related_user_types": [ { "type": "tenant" } ] }
        }
      }
    },

    {
      "type": "service_identity",
      "relations": {
        "in_tenant": { "this": {} },
        "can_use": {
          "union": {
            "child": [
              { "tupleToUserset": { "tupleset": { "relation": "in_tenant" }, "computedUserset": { "relation": "admin" } } },
              { "tupleToUserset": { "tupleset": { "relation": "in_tenant" }, "computedUserset": { "relation": "identity_admin" } } }
            ]
          }
        }
      },
      "metadata": {
        "relations": {
          "in_tenant": { "directly_related_user_types": [ { "type": "tenant" } ] }
        }
      }
    }
  ]
}
